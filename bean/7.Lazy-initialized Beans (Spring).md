## ЁЯРв **Lazy-initialized Beans (Spring)** тАФ рж╕рж╣ржЬржнрж╛ржмрзЗ, ржЙржжрж╛рж╣рж░ржгрж╕рж╣

![Image](https://java-design-patterns.com/assets/img/lazy-loading-sequence-diagram.dc18e6ce.png)

![Image](https://miro.medium.com/v2/resize%3Afit%3A1358/format%3Awebp/1%2AxhzGsCqpuVzhDlwJVKiE0Q.jpeg)

![Image](https://www.logicbig.com/tutorials/spring-framework/spring-core/lazy-loading/images/lazy.png)

### ЁЯза ржПржХ рж▓рж╛ржЗржирзЗ

> **Lazy-initialized Bean ржорж╛ржирзЗтАФApplication start-ржПрж░ рж╕ржорзЯ ржмрж╛ржирж╛ржирзЛ рж╣рзЯ ржирж╛; ржкрзНрж░ржержоржмрж╛рж░ ржжрж░ржХрж╛рж░ рж╣рж▓рзЗ рждржЦржиржЗ ржмрж╛ржирж╛ржирзЛ рж╣рзЯред**

---

## ЁЯФД Eager vs Lazy (ржЭржЯржкржЯ ржкрж╛рж░рзНржержХрзНржп)

| ржмрж┐рж╖рзЯ         | Eager (Default) | Lazy            |
| ------------ | --------------- | --------------- |
| ржХржЦржи рждрзИрж░рж┐     | App start-ржП     | ржкрзНрж░ржержо ржмрзНржпржмрж╣рж╛рж░рзЗржЗ |
| Startup time | ржзрзАрж░ рж╣рждрзЗ ржкрж╛рж░рзЗ    | ржжрзНрж░рзБржд           |
| Memory       | ржмрзЗрж╢рж┐ upfront    | ржкрзНрж░рзЯрзЛржЬржи ржЕржирзБржпрж╛рзЯрзА |
| Default      | тЬЕ               | тЭМ               |

---

## ЁЯРв Lazy Bean ржХрзАржнрж╛ржмрзЗ ржмрж╛ржирж╛ржмрзЛ?

### 1я╕ПтГг `@Lazy` (рж╕ржмржЪрзЗрзЯрзЗ рж╕рж╣ржЬ)

```java
@Lazy
@Service
public class ReportService {
    public ReportService() {
        System.out.println("ReportService created");
    }
}
```

**ржлрж▓рж╛ржлрж▓:**

* App start тЖТ **ржХрж┐ржЫрзБржЗ рж╣ржмрзЗ ржирж╛**
* ржкрзНрж░ржержоржмрж╛рж░ inject/ржХрж▓ тЖТ рждржЦржи constructor ржЪрж▓ржмрзЗ

---

### 2я╕ПтГг Injection point-ржП `@Lazy`

```java
@Service
public class OrderService {

    private final ReportService reportService;

    public OrderService(@Lazy ReportService reportService) {
        this.reportService = reportService;
    }
}
```

ЁЯСЙ `OrderService` start-ржП рждрзИрж░рж┐ рж╣ржмрзЗ
ЁЯСЙ `ReportService` **ржкрзНрж░ржержо ржмрзНржпржмрж╣рж╛рж░ ржкрж░рзНржпржирзНржд** рждрзИрж░рж┐ рж╣ржмрзЗ ржирж╛

---

### 3я╕ПтГг Global Lazy (Spring Boot)

```properties
spring.main.lazy-initialization=true
```

* рж╕ржм Bean lazy
* ржпрзЗржЧрзБрж▓рзЛ ржжрж░ржХрж╛рж░, рж╕рзЗржЧрзБрж▓рзЛржЗ рждрзИрж░рж┐ рж╣ржмрзЗ

---

## ЁЯзк ржЫрзЛржЯ Demo (ржХржирж╕рзЛрж▓ ржЖржЙржЯржкрзБржЯ)

```java
@Service
class A {
    A() { System.out.println("A created"); }
}

@Lazy
@Service
class B {
    B() { System.out.println("B created"); }
}
```

**Startup Output:**

```
A created
```

**ржпржЦржи B ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ:**

```
B created
```

---

## ЁЯдФ ржХржЦржи Lazy ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЛ?

### тЬЕ ржнрж╛рж▓рзЛ ржмрзНржпржмрж╣рж╛рж░

* Heavy initialization (DB, files, ML model)
* Optional feature
* Rarely used service
* Circular dependency ржнрж╛ржЩрждрзЗ

### тЭМ ржПрзЬрж┐рзЯрзЗ ржЪрж▓

* Core service
* Security/Auth
* Request handling path-ржПрж░ critical ржЕржВрж╢

---

## тЪая╕П ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЖржЪрж░ржг (Know this)

* **Singleton lazy** тЖТ ржкрзНрж░ржержо access-ржП ржПржХржмрж╛рж░ржЗ рждрзИрж░рж┐
* **Prototype lazy** тЖТ ржкрзНрж░рждрж┐ржмрж╛рж░ access-ржП ржирждрзБржи
* `@PostConstruct` тЖТ **lazy bean рждрзИрж░рж┐ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯрзЗржЗ** ржЪрж▓рзЗ
* Thread-safe (Spring ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ)

---

## ЁЯза Lazy + AOP

Lazy bean рж╕рж╛ржзрж╛рж░ржгржд **proxy** ржжрж┐рзЯрзЗ inject рж╣рзЯред
ржкрзНрж░ржержо method call-ржП proxy ржЖрж╕рж▓ Bean ржмрж╛ржирж╛рзЯред

---

## ЁЯОп Interview-Ready Answer

> **Lazy-initialized Bean ржПржоржи Bean ржпрж╛ application startup-ржП рждрзИрж░рж┐ ржирж╛ рж╣рзЯрзЗ, ржкрзНрж░ржержоржмрж╛рж░ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕ржорзЯ рждрзИрж░рж┐ рж╣рзЯтАФржПрждрзЗ startup time ржУ memory usage ржХржорзЗред**

---

## ЁЯз╛ ржПржХ рж▓рж╛ржЗржирзЗ рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк

> **Lazy = тАЬржкрзНрж░рзЯрзЛржЬржи ржирж╛ рж╣рж▓рзЗ ржмрж╛ржирж╛ржмрзЛ ржирж╛тАЭ**

---

ржЪрж╛ржУ рждрзЛ ржкрж░рзЗрж░ ржзрж╛ржкрзЗ ржжрзЗржЦрж╛рждрзЗ ржкрж╛рж░рж┐:

* ЁЯФе Lazy vs Prototype deep dive
* ЁЯФе Lazy ржжрж┐рзЯрзЗ circular dependency solve
* ЁЯФе Performance benchmark example
* ЁЯФе Common pitfalls

ржмрж▓рж▓рзЗржЗ рж╢рзБрж░рзБ ржХрж░рж┐ ЁЯСН
